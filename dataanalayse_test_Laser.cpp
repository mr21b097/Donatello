#include <iostream>
#include <string>
#include <regex>
#include <vector>

int main() {
    std::string input = R"(Client 1 Ausgabe:
---START---{"header": {"seq": 8251, "stamp": {"secs": 1706291736, "nsecs": 962803091}, "frame_id": "base_scan"}, "angle_min": 0.0, "angle_max": 6.2657318115234375, "angle_increment": 0.01745329238474369, "time_increment": 0.0005592841189354658, "scan_time": 0.20134228467941284, "range_min": 0.11999999731779099, "range_max": 3.5, "ranges": [0.32899999618530273, 0.33000001311302185, 0.33000001311302185, 0.3310000002384186, 0.3330000042915344, 0.335999995470047, 0.33500000834465027, 0.33399999141693115, 0.0, 0.33799999952316284, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0850000381469727, 1.1039999723434448, 1.0829999446868896, 1.065999984741211, 1.0820000171661377, 1.093999981880188, 1.1069999933242798, 1.125, 1.1770000457763672, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.3610000014305115, 0.3610000014305115, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.6620000004768372, 0.6620000004768372, 0.6460000276565552, 0.6209999918937683, 0.6060000061988831, 0.597000002861023, 0.5839999914169312, 0.5709999799728394, 0.5590000152587891, 0.5479999780654907, 0.5379999876022339, 0.527999997138977, 0.5180000066757202, 0.5090000033378601, 0.5019999742507935, 0.4970000088214874, 0.4959999918937683, 0.4959999918937683, 0.4959999918937683, 0.4970000088214874, 0.49900001287460327, 0.49900001287460327, 0.5009999871253967, 0.503000020980835, 0.5049999952316284, 0.49900001287460327, 0.4950000047683716, 0.492000013589859, 0.48899999260902405, 0.4869999885559082, 0.4869999885559082, 0.4880000054836273, 0.4909999966621399, 0.4950000047683716, 0.49900001287460327, 0.5059999823570251, 0.5139999985694885, 0.5239999890327454, 0.5360000133514404, 0.0, 2.1989998817443848, 2.1600000858306885, 2.1519999504089355, 2.13100004196167, 2.1110000610351562, 2.1029999256134033, 2.0999999046325684, 2.055999994277954, 1.8919999599456787, 2.058000087738037, 1.8209999799728394, 1.805999994277954, 1.8580000400543213, 1.8569999933242798, 1.9160000085830688, 1.86899995803833, 1.902999997138977, 1.9179999828338623, 2.003000020980835, 1.9889999628067017, 1.9229999780654907, 1.934000015258789, 1.8760000467300415, 1.7389999628067017, 1.7269999980926514, 1.7269999980926514, 1.6710000038146973, 1.718999981880188, 1.687000036239624, 1.6139999628067017, 1.6080000400543213, 1.6770000457763672, 1.6740000247955322, 1.6660000085830688, 1.6319999694824219, 1.8849999904632568, 0.5289999842643738, 0.5289999842643738, 0.5199999809265137, 0.5139999985694885, 0.5099999904632568, 0.5090000033378601, 0.5080000162124634, 0.5109999775886536, 0.5130000114440918, 0.5149999856948853, 0.5199999809265137, 0.527999997138977, 0.5400000214576721, 0.5389999747276306, 0.5460000038146973, 0.550000011920929, 0.5529999732971191, 0.5559999942779541, 0.5590000152587891, 0.5640000104904175, 0.5690000057220459, 0.5730000138282776, 0.574999988079071, 0.5770000219345093, 0.5820000171661377, 0.5870000123977661, 0.5960000157356262, 0.6039999723434448, 0.6100000143051147, 0.6110000014305115, 0.6169999837875366, 0.625, 0.628000020980835, 0.6510000228881836, 0.6639999747276306, 0.6800000071525574, 0.6800000071525574, 0.6819999814033508, 0.6940000057220459, 0.0, 3.2920000553131104, 3.2929999828338623, 3.252000093460083, 3.2119998931884766, 3.255000114440918, 3.2980000972747803, 3.444000005722046, 3.503999948501587, 3.510999917984009, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 3.132999897003174, 3.130000114440918, 3.1470000743865967, 3.117000102996826, 3.114000082015991, 3.125999927520752, 0.0, 0.0, 3.2209999561309814, 0.0, 0.0, 0.0, 0.0, 0.0, 0.7889999747276306, 0.8069999814033508, 0.0, 0.7870000004768372, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.3619999885559082, 0.3619999885559082, 0.35899999737739563, 0.35600000619888306, 0.34200000762939453, 0.335999995470047, 0.3330000042915344, 0.3310000002384186, 0.32899999618530273, 0.32899999618530273, 0.32899999618530273, 0.328000009059906, 0.328000009059906, 0.328000009059906, 0.328000009059906, 0.3269999921321869, 0.3269999921321869, 0.3269999921321869, 0.328000009059906, 0.32899999618530273], "intensities": [5481.0, 4930.0, 5454.0, 4104.0, 4288.0, 2895.0, 3896.0, 3843.0, 6251.0, 1095.0, 0.0, 0.0, 72.0, 58.0, 70.0, 64.0, 71.0, 2160.0, 2676.0, 2326.0, 2304.0, 1897.0, 2263.0, 1545.0, 1482.0, 1524.0, 0.0, 0.0, 0.0, 0.0, 43.0, 75.0, 61.0, 52.0, 52.0, 0.0, 47.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1369.0, 4083.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 92.0, 89.0, 100.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 32.0, 34.0, 0.0, 65.0, 76.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 36.0, 74.0, 64.0, 0.0, 0.0, 67.0, 101.0, 97.0, 2371.0, 3161.0, 3109.0, 3074.0, 3799.0, 3228.0, 3308.0, 3623.0, 3690.0, 3461.0, 4004.0, 4349.0, 4580.0, 4184.0, 3932.0, 4227.0, 3889.0, 4054.0, 4547.0, 3806.0, 4171.0, 4130.0, 3871.0, 4387.0, 5127.0, 4560.0, 4304.0, 3869.0, 4185.0, 3873.0, 4793.0, 3832.0, 4241.0, 3747.0, 4875.0, 3846.0, 4637.0, 4630.0, 4428.0, 0.0, 588.0, 708.0, 753.0, 775.0, 803.0, 843.0, 805.0, 794.0, 471.0, 890.0, 535.0, 805.0, 466.0, 423.0, 344.0, 294.0, 372.0, 406.0, 668.0, 987.0, 270.0, 698.0, 444.0, 610.0, 755.0, 840.0, 884.0, 893.0, 530.0, 1034.0, 717.0, 794.0, 870.0, 993.0, 923.0, 483.0, 2666.0, 3507.0, 4651.0, 3670.0, 3662.0, 5783.0, 4202.0, 4319.0, 3981.0, 5363.0, 5760.0, 4752.0, 3421.0, 3558.0, 3969.0, 3657.0, 4146.0, 3846.0, 3569.0, 3552.0, 3809.0, 3803.0, 3588.0, 3808.0, 3791.0, 2890.0, 3593.0, 4507.0, 2903.0, 3500.0, 3059.0, 3316.0, 2962.0, 5708.0, 2763.0, 3890.0, 3167.0, 4505.0, 3072.0, 40.0, 369.0, 405.0, 415.0, 398.0, 174.0, 284.0, 272.0, 270.0, 429.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 55.0, 0.0, 51.0, 0.0, 0.0, 0.0, 58.0, 51.0, 59.0, 60.0, 95.0, 480.0, 481.0, 498.0, 502.0, 494.0, 132.0, 0.0, 0.0, 304.0, 6211.0, 365.0, 0.0, 0.0, 118.0, 1185.0, 718.0, 51.0, 205.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 102.0, 102.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 45.0, 0.0, 42.0, 0.0, 50.0, 44.0, 0.0, 57.0, 46.0, 56.0, 54.0, 66.0, 67.0, 67.0, 74.0, 59.0, 84.0, 71.0, 84.0, 75.0, 93.0, 95.0, 227.0, 218.0, 255.0, 394.0, 610.0, 963.0, 1142.0, 1668.0, 2699.0, 3877.0, 4601.0, 4664.0, 4571.0, 4148.0, 4327.0, 5066.0, 4851.0, 5382.0, 4660.0, 4735.0]}___END___)";

    // Marker definitions
    std::string startMarker = "---START---";
    std::string endMarker = "___END___";

    // Check if both markers exist
    size_t startPos = input.find(startMarker);
    size_t endPos = input.find(endMarker);

    if (startPos != std::string::npos && endPos != std::string::npos) {
        // Extract the data between markers
        startPos += startMarker.length();
        std::string jsonData = input.substr(startPos, endPos - startPos);

        // Find the ranges array in the JSON data
        std::regex rangesRegex("\"ranges\":\\s*\\[(.*?)\\]");
        std::smatch matches;
        if (std::regex_search(jsonData, matches, rangesRegex)) {
            std::string rangesString = matches[1].str();

            // Parse the ranges into a vector
            std::vector<float> ranges;
            std::regex numberRegex("-?\\d+(\\.\\d+)?");
            auto numbersBegin = std::sregex_iterator(rangesString.begin(), rangesString.end(), numberRegex);
            auto numbersEnd = std::sregex_iterator();

            for (std::sregex_iterator i = numbersBegin; i != numbersEnd; ++i) {
                ranges.push_back(std::stof((*i).str()));
            }

            // Check if the ranges array has exactly 360 values
            if (ranges.size() == 360) {
                std::cout << "Extracted ranges:" << std::endl;
                for (float range : ranges) {
                    std::cout << range << " ";
                }
                std::cout << std::endl;
            } else {
                std::cout << "Error: Ranges array does not contain exactly 360 values. Found: " << ranges.size() << std::endl;
            }
        } else {
            std::cout << "Ranges array not found in the JSON data." << std::endl;
        }
    } else {
        std::cout << "Markers not found in the input string." << std::endl;
    }

    return 0;
}
